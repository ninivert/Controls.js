{"version":3,"sources":["../../src/scripts/controls.js"],"names":["DOMControls","options","parent","globalCallback","DOMNames","undefined","nodeType","IDPrefix","wrapper","inputWrapper","labelWrapper","valueWrapper","radioWrapper","keys","Object","key","option","type","value","default","attributes","showLabel","label","showValue","ignoreGlobalCallback","ignoreReset","inputElements","wrapperElement","document","createElement","inputWrapperElement","labelWrapperElement","valueWrapperElement","inputElement","labelElement","valueElement","ID","join","innerHTML","setAttribute","className","appendChild","_wrapperElement","i","values","length","_inputElement","_labelElement","_inputWrapperElement","_labelWrapperElement","id","name","checked","inputAttributes","attr","push","element","addEventListener","callback","bind","ev","files","reader","FileReader","onload","file","readAsDataURL","ignoreCallback","Boolean","validity","valid","parseFloat","set","call"],"mappings":"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","file":"controls.js","sourcesContent":["class DOMControls {\r\n\t/**\r\n\t * The constructor step up the class, option defaults and prepares the DOM\r\n\t */\r\n\r\n\tconstructor(options, parent, globalCallback, DOMNames) {\r\n\t\t/**\r\n\t\t * Setup class\r\n\t\t */\r\n\t\tif (options === undefined || parent === undefined) {\r\n\t\t\tthrow \"Options and parent must be specified\";\r\n\t\t}\r\n\t\tif (parent.nodeType !== 1) {\r\n\t\t\tthrow \"Parent node must be an element\";\r\n\t\t}\r\n\t\tthis.options = options;\r\n\t\tthis.parent = parent;\r\n\t\tthis.globalCallback = globalCallback || function() {};\r\n\t\tthis.DOMNames = DOMNames || {\r\n\t\t\tIDPrefix: [\"option\"],\r\n\t\t\twrapper: [\"option\"],\r\n\t\t\tinputWrapper: [\"option__input_wrapper\"],\r\n\t\t\tlabelWrapper: [\"option__label_wrapper\"],\r\n\t\t\tvalueWrapper: [\"option__value_wrapper\"],\r\n\t\t\tradioWrapper: [\"option__radio_wrapper\"]\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Setup the DOM\r\n\t\t * Check if the options are correct\r\n\t\t * Create elements\r\n\t\t */\r\n\t\tconst keys = Object.keys(this.options);\r\n\r\n\t\tfor (let key of keys) {\r\n\t\t\tconst option = this.options[key];\r\n\r\n\t\t\t// Throw errors for undefined required fields\r\n\t\t\tif (option.type === undefined || option.value === undefined) {\r\n\t\t\t\tthrow `Option ${key} must have a type and a value`;\r\n\t\t\t}\r\n\r\n\t\t\t// Set option defaults\r\n\t\t\toption.default = option.default === undefined ? option.value : option.default;\r\n\t\t\toption.attributes = option.attributes === undefined ? {} : option.attributes;\r\n\t\t\t// option.callback = option.callback === undefined ? function() {} : option.callback;\r\n\t\t\toption.showLabel = option.label === undefined ? false : true;\r\n\t\t\toption.showValue = option.showValue === undefined ? false : option.showValue;\r\n\t\t\toption.ignoreGlobalCallback = option.ignoreGlobalCallback === undefined ? false : option.ignoreGlobalCallback;\r\n\t\t\toption.ignoreReset = option.ignoreReset === undefined ? false : option.ignoreReset;\r\n\t\t\toption.inputElements = [];\r\n\r\n\t\t\t// Create DOM elements\r\n\t\t\tconst wrapperElement = document.createElement(\"div\");\r\n\t\t\tconst inputWrapperElement = document.createElement(\"div\");\r\n\t\t\tconst labelWrapperElement = document.createElement(\"div\");\r\n\t\t\tconst valueWrapperElement = document.createElement(\"div\");\r\n\t\t\tconst inputElement = document.createElement(\"input\");\r\n\t\t\tconst labelElement = document.createElement(\"label\");\r\n\t\t\tconst valueElement = document.createElement(\"span\");\r\n\r\n\t\t\t// Set the ID of the element\r\n\t\t\t// The keys are unique (by definition) so each ID is unique\r\n\t\t\tconst ID = `${this.DOMNames.IDPrefix.join(\"_\")}_${key}`\r\n\r\n\t\t\t// Setup the label for the element\r\n\t\t\tif (option.showLabel) {\r\n\t\t\t\tlabelElement.innerHTML = option.label;\r\n\t\t\t\tlabelElement.setAttribute(\"for\", ID);\r\n\t\t\t\tlabelWrapperElement.className = this.DOMNames.labelWrapper.join(\" \");\r\n\t\t\t\tlabelWrapperElement.appendChild(labelElement);\r\n\t\t\t\twrapperElement.appendChild(labelWrapperElement);\r\n\t\t\t\toption.labelElement = labelElement;\r\n\t\t\t}\r\n\r\n\t\t\t// Setup the value for the element\r\n\t\t\tif (option.showValue) {\r\n\t\t\t\tvalueElement.innerHTML = option.value;\r\n\t\t\t\tvalueWrapperElement.className = this.DOMNames.valueWrapper.join(\" \");\r\n\t\t\t\tvalueWrapperElement.appendChild(valueElement);\r\n\t\t\t\twrapperElement.appendChild(valueWrapperElement);\r\n\t\t\t\toption.valueElement = valueElement;\r\n\t\t\t}\r\n\r\n\t\t\t// Setup DOM input element\r\n\t\t\tswitch (option.type) {\r\n\t\t\t\tcase \"radio\":\r\n\t\t\t\t\t// Create multiple little inputs that are linked by the shared name\r\n\t\t\t\t\tconst _wrapperElement = document.createElement(\"div\");\r\n\t\t\t\t\tfor (let i = 0; i < option.values.length; ++i) {\r\n\t\t\t\t\t\t// Create input element\r\n\t\t\t\t\t\tconst _inputElement = document.createElement(\"input\");\r\n\t\t\t\t\t\tconst _labelElement = document.createElement(\"label\");\r\n\t\t\t\t\t\tconst _inputWrapperElement = document.createElement(\"div\");\r\n\t\t\t\t\t\tconst _labelWrapperElement = document.createElement(\"div\");\r\n\t\t\t\t\t\t// Set input element id and name\r\n\t\t\t\t\t\t_inputElement.type = \"radio\";\r\n\t\t\t\t\t\t_inputElement.value = option.values[i];\r\n\t\t\t\t\t\t_inputElement.id = `${ID}__${i}`;\r\n\t\t\t\t\t\t_inputElement.name = ID;\r\n\t\t\t\t\t\t_inputElement.checked = option.values[i] === option.value;\r\n\t\t\t\t\t\tconst inputAttributes = Object.keys(option.attributes);\r\n\t\t\t\t\t\tfor (let attr of inputAttributes) {\r\n\t\t\t\t\t\t\t_inputElement.setAttribute(attr, option.attributes[attr]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Set label\r\n\t\t\t\t\t\t_labelElement.setAttribute(\"for\", `${ID}__${i}`);\r\n\t\t\t\t\t\t_labelElement.innerHTML = option.values[i];\r\n\t\t\t\t\t\t// Classes for the wrappers\r\n\t\t\t\t\t\t_inputWrapperElement.className = this.DOMNames.inputWrapper.join(\" \");\r\n\t\t\t\t\t\t_labelWrapperElement.className = this.DOMNames.labelWrapper.join(\" \");\r\n\t\t\t\t\t\t// Append children\r\n\t\t\t\t\t\t_inputWrapperElement.appendChild(_inputElement);\r\n\t\t\t\t\t\t_labelWrapperElement.appendChild(_labelElement);\r\n\t\t\t\t\t\t_wrapperElement.appendChild(_inputWrapperElement);\r\n\t\t\t\t\t\t_wrapperElement.appendChild(_labelWrapperElement);\r\n\t\t\t\t\t\toption.inputElements.push(_inputElement);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_wrapperElement.id = ID;\r\n\t\t\t\t\t_wrapperElement.className = this.DOMNames.radioWrapper.join(\" \");\r\n\t\t\t\t\twrapperElement.appendChild(_wrapperElement);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"checkbox\":\r\n\t\t\t\t\tinputElement.checked = option.value;\r\n\t\t\t\t\t// Notice no break, so jump to default\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tinputElement.type = option.type;\r\n\t\t\t\t\tinputElement.value = option.value;\r\n\t\t\t\t\tinputElement.id = ID;\r\n\t\t\t\t\tconst inputAttributes = Object.keys(option.attributes);\r\n\t\t\t\t\tfor (let attr of inputAttributes) {\r\n\t\t\t\t\t\tinputElement.setAttribute(attr, option.attributes[attr]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinputWrapperElement.className = this.DOMNames.inputWrapper.join(\" \");\r\n\t\t\t\t\tinputWrapperElement.appendChild(inputElement);\r\n\t\t\t\t\twrapperElement.appendChild(inputWrapperElement);\r\n\t\t\t\t\toption.inputElements.push(inputElement);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\t// Add callbacks\r\n\t\t\tfor (let element of option.inputElements) {\r\n\t\t\t\tswitch (option.type) {\r\n\t\t\t\t\tcase \"button\":\r\n\t\t\t\t\tcase \"reset\":\r\n\t\t\t\t\t\telement.addEventListener(\"click\", this.callback.bind(this, key, false));\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase \"file\":\r\n\t\t\t\t\t\telement.addEventListener(\"change\", (function(key, ev) {\r\n\t\t\t\t\t\t\tconst files = this.options[key].inputElements[0].files;\r\n\t\t\t\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\t\t\t\t// Calling the class callback is useless here\r\n\t\t\t\t\t\t\treader.onload = this.options[key].callback;\r\n\t\t\t\t\t\t\tfor (let file of files) reader.readAsDataURL(file);\r\n\t\t\t\t\t\t}).bind(this, key));\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\telement.addEventListener(\"input\", this.callback.bind(this, key, false));\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Set wrapper classes\r\n\t\t\twrapperElement.className = this.DOMNames.wrapper.join(\" \");\r\n\r\n\t\t\t// Append the wrapper to the parent\r\n\t\t\tthis.parent.appendChild(wrapperElement);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Callback function\r\n\t * Called in the scope of the class\r\n\t */\r\n\r\n\tcallback(key, ignoreCallback) {\r\n\t\tlet option = this.options[key];\r\n\t\tlet value;\r\n\r\n\t\tswitch (option.type) {\r\n\t\t\tcase \"checkbox\":\r\n\t\t\t\tvalue = Boolean(option.inputElements[0].checked);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"radio\":\r\n\t\t\t\tfor (let element of option.inputElements) {\r\n\t\t\t\t\tif (element.checked) {\r\n\t\t\t\t\t\tvalue = element.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (value === undefined) value = option.default;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"number\":\r\n\t\t\tcase \"range\":\r\n\t\t\tcase \"slider\":\r\n\t\t\t\tif (option.inputElements[0].validity.valid) {\r\n\t\t\t\t\tvalue = parseFloat(option.inputElements[0].value || option.default);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = option.value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"reset\":\r\n\t\t\t\tconst keys = Object.keys(this.options);\r\n\t\t\t\tfor (let i = 0; i < keys.length; ++i) {\r\n\t\t\t\t\tif (this.options[keys[i]].type !== \"reset\") {\r\n\t\t\t\t\t\tthis.set(keys[i], this.options[keys[i]].default);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tif (option.inputElements[0].validity.valid) {\r\n\t\t\t\t\tvalue = option.inputElements[0].value;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalue = option.value;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\toption.value = value;\r\n\t\tif (option.showValue) option.valueElement.innerHTML = value;\r\n\t\tif (option.callback !== undefined && !ignoreCallback) option.callback(value);\r\n\t\tif (!option.ignoreGlobalCallback && !ignoreCallback) this.globalCallback();\r\n\t}\r\n\r\n\t/**\r\n\t * Getter and setter\r\n\t */\r\n\r\n\tset(key, value) {\r\n\t\tconst option = this.options[key];\r\n\r\n\t\tswitch (option.type) {\r\n\t\t\tcase \"checkbox\":\r\n\t\t\t\toption.inputElements[0].checked = Boolean(value);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"radio\":\r\n\t\t\t\tfor (let element of option.inputElements) {\r\n\t\t\t\t\telement.checked = false;\r\n\t\t\t\t\tif (element.value === value) {\r\n\t\t\t\t\t\telement.checked = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\toption.inputElements[0].value = value;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tthis.callback.call(this, key, true);\r\n\t}\r\n \r\n\tget(key) {\r\n\t\treturn this.options[key].value;\r\n\t}\r\n}"]}